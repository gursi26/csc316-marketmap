<!doctype html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>MarketMap ðŸ“¡</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Major+Mono+Display&family=Rubik+80s+Fade&family=Work+Sans:ital,wght@0,100..900;1,100..900&family=Press+Start+2P&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://unpkg.com/d3@7"></script>
    <script src="https://unpkg.com/topojson-client@3"></script>
</head>

<body>
    <!-- Page navigation dots -->
    <nav class="page-dots">
        <button class="dot active big-dot" data-section="0"></button>
        <button class="dot active small-dot" data-section="0"></button>

        <button class="dot big-dot" data-section="1"></button>
        <button class="dot small-dot" data-section="1"></button>

        <button class="dot big-dot" data-section="2"></button>
        <button class="dot small-dot" data-section="2"></button>

        <button class="dot big-dot" data-section="3"></button>
        <button class="dot small-dot" data-section="3"></button>

        <button class="dot big-dot" data-section="4"></button>
        <button class="dot small-dot" data-section="4"></button>

        <button class="dot big-dot" data-section="5"></button>
        <button class="dot small-dot" data-section="5"></button>


    </nav>

    <div class="snap-container">

        <!-- SECTION 1 â€” Landing -->
        <div class="section section-one">
            <h1 class="rubik">MarketMap</h1>
            <h4 class="major-mono">a gps for your career path</h4>
            <div class="button-holder">
                <button id="scrollDownButton" class="work-sans-400">Get Started â†“</button>
            </div>
        </div>

        <div class="section transition-page section-one-transition">
            <h3>First, let's figure out where in the world your career should start.</h3>
        </div>

        <!-- SECTION 2 â€” Map -->
        <div class="section section-two">
            <div class="mapvis-wrapper">
                <div class="app-header">
                    <div class="header-left">
                        <h1>Company Atlas</h1>
                        <p class="subtitle">Click a state to zoom in Â· Click a company icon to learn more</p>
                    </div>
                </div>
                <main class="layout">
                    <section class="viz">
                        <div id="legend-panel" class="legend-panel collapsed"></div>
                        <div id="state-label" class="state-label"></div>
                        <div id="tooltip" class="tooltip" style="display:none"></div>
                        <svg id="chart" viewBox="-100 -40 1170 720" preserveAspectRatio="xMidYMid meet"></svg>
                    </section>
                    <aside class="state-companies-panel">
                        <div class="panel-header">
                            <h3 id="state-panel-title">Select a State</h3>
                        </div>
                        <div id="companies-bar-chart" class="companies-bar-chart"></div>
                    </aside>
                </main>

                <script>
                    window.APP_CONFIG = {
                        dataDir: "data",
                        files: {
                            info: "Company-info.csv",
                            financials: "Company-financials.csv",
                            salary: "Company-salary.csv",
                            prices: "nasdaq100_yearly_prices.csv"
                        }
                    };
                </script>
                <script src="js/mapvis.js"></script>
            </div>
        </div>

        <div class="section transition-page section-two-transition">
            <h3>Now that we've checked out some possible destinations, it's time to see what your benefits could look like.</h3>
        </div>

        <!-- SECTION 3 â€” Benefits -->
        <div class="section section-three">
            <iframe src="benefits vis/index.html" style="width:100vw;height:100vh;border:none;overflow:hidden;" scrolling="no"></iframe>
        </div>

        <div class="section transition-page section-three-transition">
            <h3>Although benefits are important, career growth is just as crucialâ€”let's explore pay progression!</h3>
        </div>

        <!-- SECTION 4 â€” Slope Chart -->
        <div class="section section-four">
            <div class="slope-chart-wrapper">
                <div id="controls">
                    <div class="control-row">
                        <label for="view-mode-select">Select By:</label>
                        <select id="view-mode-select">
                            <option value="company">Company</option>
                            <option value="role">Role</option>
                        </select>
                    </div>
                    <div class="control-row">
                        <label for="item-select" id="item-label">Company:</label>
                        <select id="item-select"></select>
                        <img id="company-logo" class="dropdown-logo" alt="">
                    </div>
                </div>

                <div id="tooltip-slope"></div>
                <div id="info-popup"></div>
                <svg id="canvas"></svg>

                <script src="js/constants.js"></script>
                <script src="js/tooltipBarChart.js"></script>
                <script src="js/utils.js"></script>
                <script src="js/collisionDetection.js"></script>
                <script src="js/bubbleRenderer.js"></script>
                <script src="js/interactionHandler.js"></script>
                <script src="js/slopeChart.js"></script>
                <script src="js/main.js"></script>
            </div>
        </div>

        <div class="section transition-page section-four-transition">
            <h3>Now it's time to zoom out and see how companies compare overall!</h3>
        </div>

        <!-- SECTION 5 â€” Scatter -->
        <div class="section section-five">
            <div class="container-scatter">
                <h2>Company Trade-offs Explorer</h2>
                <p class="subtitle-scatter">Mix and match axes, colours, and bubble size to explore sentiment vs performance.</p>

                <div class="controls-and-legend">
                    <div class="controls-scatter">
                        <div class="controls-header">
                            <span class="controls-title">Plot controls</span>
                        </div>

                        <div class="control-groups-row">
                            <div class="control-group">
                                <label for="x-axis">X-Axis:</label>
                                <select id="x-axis">
                                    <option value="ceo_approval">CEO Approval %</option>
                                    <option value="employee_rating">Employee Rating</option>
                                    <option value="sentiment">Sentiment Score</option>
                                </select>
                            </div>

                            <div class="control-group">
                                <label for="y-axis">Y-Axis:</label>
                                <select id="y-axis">
                                    <option value="pe_ratio">P/E Ratio</option>
                                    <option value="revenue">Revenue ($)</option>
                                    <option value="market_cap">Market Cap ($)</option>
                                    <option value="employee_count">Employee Count</option>
                                </select>
                            </div>

                            <div class="control-group">
                                <label for="color-by">Colour:</label>
                                <select id="color-by">
                                    <option value="sentiment">Sentiment Score</option>
                                    <option value="sector">Sector</option>
                                    <option value="ceo_approval">CEO Approval</option>
                                    <option value="employee_rating">Employee Rating</option>
                                </select>
                            </div>

                            <div class="control-group">
                                <label for="size-by">Bubble Size:</label>
                                <select id="size-by">
                                    <option value="market_cap">Market Cap</option>
                                    <option value="revenue">Revenue</option>
                                    <option value="employee_count">Employee Count</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="legend-scatter">
                        <h4 class="legend-title">Legends</h4>
                        <div id="size-legend"></div>
                        <div id="color-legend"></div>
                    </div>
                </div>

                <div class="chart-container-scatter">
                    <div class="scatter-hint-badge">Hover for stats Â· Click for details</div>
                    <svg id="scatterplot"></svg>
                    <div id="tooltip-scatter" class="tooltip-scatter"></div>
                </div>
            </div>

            <script src="js/scatter.js"></script>
        </div>

        <!-- NEW TRANSITION BELOW SCATTER (your new one) -->
        <div class="section transition-page section-six-transition">
            <h3>Before we wrap up, letâ€™s explore one last perspectiveâ€”our forest visualization.</h3>
        </div>

        <!-- === SECTION SIX â€” Forest Visualization === -->
        <div class="section section-six">
            <div class="forest-container">

                <!-- Controls & Title -->
                <div class="forest-controls">

                    <div class="forest-title-block">
                        <h2 class="forest-title">Market Forest</h2>
                        <p class="forest-subtitle">
                            Watch three companies grow from 2022â€“2025: trunk = market cap, branches = price, leaves = sentiment & volume.
                        </p>
                    </div>

                    <!-- Dropdown Row -->
                    <div class="forest-select-row">

                        <div class="forest-select-group">
                            <label for="forest-company-1">Company 1</label>
                            <select id="forest-company-1"></select>
                        </div>

                        <div class="forest-select-group">
                            <label for="forest-company-2">Company 2</label>
                            <select id="forest-company-2"></select>
                        </div>

                        <div class="forest-select-group">
                            <label for="forest-company-3">Company 3</label>
                            <select id="forest-company-3"></select>
                        </div>

                        <!-- Buttons -->
                        <div class="forest-buttons">
                            <button id="forest-play">â–¶ Play growth</button>
                            <button id="forest-reset">âŸ³ Reset</button>
                        </div>

                    </div> <!-- /.forest-select-row -->

                </div> <!-- /.forest-controls -->

                <!-- SVG Visualization -->
                <svg id="forest-viz"></svg>

            </div> <!-- /.forest-container -->

            <script src="js/forest.js"></script>
        </div> <!-- /.section-six -->


        <!-- EXISTING FINAL TRANSITION â€” KEEP AS LAST -->
        <div class="section transition-page section-five-transition">
            <h3>We hope that you were able to better <em>map-out</em> your career with our visualizations.<br>Good luck,
                from the MarketMap team!</h3>

            <div class="button-holder">
                <button id="sourcesButton" class="work-sans-400"><em>Sources</em></button>

                <dialog id="sources-popup">
                    <div class="popup-content-wrapper">
                        <div class="sources-container">

                            <h4 class="sources-header">Image Credits</h4>
                            <div class="links-row">
                                <div class="links-column">
                                    <a href="https://unsplash.com/photos/a-view-of-the-earth-from-an-airplane-zVNU8WC1ino" class="credit">Dembee Tsogoo (Unsplash)<br></a>
                                    <a href="https://unsplash.com/photos/brown-glass-bottle-beside-white-book-on-blue-and-white-textile-oj0zeY2Ltk4" class="credit">S'well (Unsplash)<br></a>
                                    <a href="https://unsplash.com/photos/photo-of-outer-space-Q1p7bh3SHj8" class="credit">NASA (Unsplash)<br></a>
                                </div>
                                <div class="links-column">
                                    <a href="https://unsplash.com/photos/high-angle-photography-of-black-high-rise-buildings-_jFDQJfCTyA" class="credit">CHUTTERSNAP (Unsplash)<br></a>
                                    <a href="https://unsplash.com/photos/crowd-of-people-sitting-on-chairs-inside-room-F2KRf_QfCqw" class="credit">Headway (Unsplash)<br></a>
                                    <a href="https://www.pexels.com/photo/high-rise-buildings-during-nighttime-2224789/" class="credit">Chait Goli (Pexels)<br></a>
                                </div>
                            </div>

                            <h4 class="sources-header">Data Sources</h4>
                            <div class="links-row">
                                <div class="links-column">
                                    <a href="https://pypi.org/project/yfinance/" class="credit">Yahoo Finance API</a>
                                    <a href="https://www.levels.fyi/?tab=levels" class="credit">Levels.fyi</a>
                                    <a href="https://www.marketaux.com/" class="credit">Marketaux API</a>
                                    <a href="https://www.glassdoor.ca/Community/index.htm" class="credit">Glassdoor</a>
                                </div>
                            </div>

                            <a href="https://site.financialmodelingprep.com/developer/docs/historical-numer-of-employees-api" class="credit">FMP Historical Employee API</a>

                        </div>

                        <button id="close-sources-popup">Close</button>
                    </div>
                </dialog>
            </div>
        </div>

    </div>

    <!-- PAGE DOT LOGIC -->
    <script>
        (function () {
            const snapContainer = document.querySelector('.snap-container');
            const sections = document.querySelectorAll('.section');
            const dots = document.querySelectorAll('.page-dots .dot');

            function updateActiveDot() {
                const scrollTop = snapContainer.scrollTop;
                const windowHeight = window.innerHeight;

                let currentSection = 0;
                sections.forEach((section, index) => {
                    const top = section.offsetTop;
                    const bottom = top + section.offsetHeight;
                    const center = scrollTop + windowHeight / 2;
                    if (center >= top && center < bottom) currentSection = index;
                });

                dots.forEach((dot, index) => {
                    dot.classList.toggle('active', index === currentSection);
                });
            }

            dots.forEach((dot, index) => {
                dot.addEventListener('click', () => {
                    sections[index].scrollIntoView({ behavior: 'smooth' });
                });
            });

            snapContainer.addEventListener('scroll', updateActiveDot);
            updateActiveDot();
        })();
    </script>
</body>
</html>
